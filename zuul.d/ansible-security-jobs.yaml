---
- job:
    name: ansible-security-integration-splunk-es
    abstract: true
    dependencies:
      - name: build-ansible-collection
        soft: true
    parent: ansible-network-appliance-base
    pre-run:
      - playbooks/ansible-test-base/pre.yaml
      - playbooks/ansible-test-network-integration-base/pre.yaml
    run: playbooks/ansible-test-base/run.yaml
    post-run:
      - playbooks/ansible-test-network-integration-base/post.yaml
      - playbooks/ansible-test-base/post.yaml
    required-projects:
      - name: github.com/ansible/ansible
      - name: github.com/ansible-collections/splunk.es
    vars:
      ansible_collections_repo: github.com/ansible-collections/splunk.es
      ansible_test_collections: true
      ansible_test_command: network-integration
      ansible_test_integration_targets: "splunk_.*"
    host-vars:
      SplunkEnterprise-SES-8.0.0:
        ansible_network_os: splunk
    nodeset: SplunkEnterprise-SES-8.0.0-python38

- job:
    name: ansible-security-integration-splunk-es-python36
    parent: ansible-security-integration-splunk-es
    vars:
      ansible_test_python: 3.6

- job:
    name: ansible-security-integration-splunk-es-python38
    parent: ansible-security-integration-splunk-es
    vars:
      ansible_test_python: 3.8
